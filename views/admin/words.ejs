<section>
  <div class="list-header">
    <h1>Gestion des mots</h1>
    <a class="btn" href="/admin/words/new">Ajouter un mot</a>
  </div>

  <form class="form" method="get" action="/admin/words" style="margin-bottom:1rem;">
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:0.75rem;">
      <label>Recherche
        <input type="text" name="search" value="<%= filters && filters.search ? filters.search : '' %>" placeholder="français / hébreu / translittération" />
      </label>
      <label>Thème
        <select name="theme_id">
          <option value="">Tous</option>
          <% (themes || []).forEach(t => { %>
            <option value="<%= t.id %>" <%= filters && filters.theme_id == t.id ? 'selected' : '' %>><%= t.name %></option>
          <% }) %>
        </select>
      </label>
      <label>Niveau
        <select name="level_id">
          <option value="">Tous</option>
          <% (levels || []).forEach(l => { %>
            <option value="<%= l.id %>" <%= filters && filters.level_id == l.id ? 'selected' : '' %>><%= l.theme_name %> - <%= l.name %></option>
          <% }) %>
        </select>
      </label>
      <label>Actif
        <select name="active">
          <option value="">Tous</option>
          <option value="1" <%= filters && filters.active === '1' ? 'selected' : '' %>>Oui</option>
          <option value="0" <%= filters && filters.active === '0' ? 'selected' : '' %>>Non</option>
        </select>
      </label>
      <label>Difficulté
        <select name="difficulty">
          <option value="">Toutes</option>
          <option value="1" <%= filters && filters.difficulty == '1' ? 'selected' : '' %>>Facile</option>
          <option value="2" <%= filters && filters.difficulty == '2' ? 'selected' : '' %>>Moyen</option>
          <option value="3" <%= filters && filters.difficulty == '3' ? 'selected' : '' %>>Difficile</option>
        </select>
      </label>
      <label>Trier
        <select name="sort">
          <option value="id" <%= !filters || !filters.sort || filters.sort === 'id' ? 'selected' : '' %>>ID asc</option>
          <option value="recent" <%= filters && filters.sort === 'recent' ? 'selected' : '' %>>Plus récent</option>
          <option value="french" <%= filters && filters.sort === 'french' ? 'selected' : '' %>>Français</option>
          <option value="difficulty" <%= filters && filters.sort === 'difficulty' ? 'selected' : '' %>>Difficulté</option>
        </select>
      </label>
    </div>
    <div style="margin-top:0.5rem;display:flex;gap:0.5rem;flex-wrap:wrap;">
      <button type="submit">Filtrer</button>
      <a class="link" href="/admin/words">Réinitialiser</a>
    </div>
  </form>

  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Francais</th>
        <th>Hebreu</th>
        <th>Translitteration</th>
        <th>Theme</th>
        <th>Niveau</th>
        <th>Difficulte</th>
        <th>Actif</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% words.forEach(w => { %>
        <tr>
          <td><%= w.id %></td>
          <td><%= w.french %></td>
          <td><%= w.hebrew %></td>
          <td><%= w.transliteration || '' %></td>
          <td><%= w.theme_name || '-' %></td>
          <td><%= w.level_name || '-' %></td>
          <td><%= w.difficulty %></td>
          <td><%= w.active ? 'Oui' : 'Non' %></td>
          <td>
            <a class="link" href="/admin/words/<%= w.id %>/edit">Modifier</a>
            <form action="/admin/words/<%= w.id %>?_method=DELETE" method="post" style="display:inline;">
              <button type="submit" onclick="return confirm('Supprimer ce mot ?');">Supprimer</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</section>
