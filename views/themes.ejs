<section>
  <div class="list-header">
    <h1>Themes par défaut</h1>
    <div class="mode-switch">
      <button type="button" class="tab-btn active" data-target="tab-actif">Actifs</button>
      <button type="button" class="tab-btn" data-target="tab-inactif">Inactifs</button>
    </div>
  </div>

  <div id="tab-actif" class="tab-panel">
    <div class="card">
      <h3 style="margin-top:0;">Thèmes actifs</h3>
      <% if (!proposedThemes || proposedThemes.length === 0) { %>
        <p>Pas encore de themes publics.</p>
      <% } else { %>
        <ul class="list">
          <% proposedThemes.forEach(t => { %>
            <li>
              <div>
                <strong><%= t.name %></strong>
                <% if (currentUser && currentUser.role === 'admin') { %>
                  <form action="/themes/<%= t.id %>/toggle" method="post" style="display:inline;margin-left:0.35rem;">
                    <button class="link" type="submit" title="Desactiver">Off</button>
                  </form>
                <% } %>
              </div>
              <a class="btn ghost" href="/themes/<%= t.id %>">Voir</a>
            </li>
          <% }) %>
        </ul>
      <% } %>
    </div>
  </div>

  <div id="tab-inactif" class="tab-panel" style="display:none;">
    <div class="card">
      <h3 style="margin-top:0;">Thèmes inactifs</h3>
      <% if (!inactiveProposed || inactiveProposed.length === 0) { %>
        <p>Aucun theme inactif.</p>
      <% } else { %>
        <ul class="list">
          <% inactiveProposed.forEach(t => { %>
            <li>
              <div><strong><%= t.name %></strong></div>
              <div class="mode-switch">
                <% if (currentUser && currentUser.role === 'admin') { %>
                  <form action="/themes/<%= t.id %>/toggle" method="post" style="display:inline;">
                    <button class="link" type="submit" title="Activer">On</button>
                  </form>
                <% } %>
                <span title="Inactif">Inactif</span>
              </div>
            </li>
          <% }) %>
        </ul>
      <% } %>
    </div>
  </div>
</section>

<script>
  (() => {
    const tabs = document.querySelectorAll('.tab-btn');
    const panels = document.querySelectorAll('.tab-panel');
    tabs.forEach(btn => {
      btn.addEventListener('click', () => {
        tabs.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.dataset.target;
        panels.forEach(p => {
          p.style.display = p.id === target ? 'block' : 'none';
        });
      });
    });
  })();
</script>
